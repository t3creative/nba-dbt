version: 2

models:
  - name: int_boxscore__team_metrics_agg
    description: Aggregated team boxscore statistics per game, including calculated per-minute and per-100-possession metrics.
    config:
      tags: ['intermediate', 'stats']
    columns:
      - name: game_id
        description: Unique identifier for the game.
        tests:
          - not_null
      - name: team_id
        description: Unique identifier for the team.
        tests:
          - not_null
      - name: pts
        description: Total points scored by the team.
      - name: ast
        description: Total assists by the team.
      - name: reb
        description: Total rebounds by the team.
      - name: stl
        description: Total steals by the team.
      - name: blk
        description: Total blocks by the team.
      - name: tov
        description: Total turnovers by the team.
      - name: fga
        description: Total field goals attempted by the team.
      - name: fta
        description: Total free throws attempted by the team.
      - name: oreb
        description: Total offensive rebounds by the team.
      - name: minutes_played
        description: Total minutes played by the team (sum of player minutes / 5 players), as a float.
      - name: total_seconds_played
        description: Total seconds played by all players on the team.
      - name: possessions
        description: Estimated number of possessions for the team in the game.
      - name: pts_per_min
        description: Points scored per minute played.
      - name: ast_per_min
        description: Assists per minute played.
      - name: reb_per_min
        description: Rebounds per minute played.
      - name: stl_per_min
        description: Steals per minute played.
      - name: blk_per_min
        description: Blocks per minute played.
      - name: tov_per_min
        description: Turnovers per minute played.
      - name: fga_per_min
        description: Field goals attempted per minute played.
      - name: fta_per_min
        description: Free throws attempted per minute played.
      - name: pts_per_100_poss
        description: Points scored per 100 possessions.
      - name: ast_per_100_poss
        description: Assists per 100 possessions.
      - name: reb_per_100_poss
        description: Rebounds per 100 possessions.
      - name: stl_per_100_poss
        description: Steals per 100 possessions.
      - name: blk_per_100_poss
        description: Blocks per 100 possessions.
      - name: tov_per_100_poss
        description: Turnovers per 100 possessions.
      - name: fga_per_100_poss
        description: Field goals attempted per 100 possessions.
      - name: fta_per_100_poss
        description: Free throws attempted per 100 possessions.
      - name: oreb_per_100_poss
        description: Offensive rebounds per 100 possessions.
    tests:
      - unique:
          column_names: [game_id, team_id]

  - name: int_boxscore__player_metrics_agg
    description: Aggregated player boxscore statistics per game, including calculated per-minute metrics.
    config:
      tags: ['intermediate', 'stats']
    columns:
      - name: game_id
        description: Unique identifier for the game.
        tests:
          - not_null
      - name: player_id
        description: Unique identifier for the player.
        tests:
          - not_null
      - name: team_id
        description: Unique identifier for the team the player played for in this game.
        tests:
          - not_null
      - name: pts
        description: Points scored by the player.
      - name: ast
        description: Assists by the player.
      - name: reb
        description: Rebounds by the player.
      - name: stl
        description: Steals by the player.
      - name: blk
        description: Blocks by the player.
      - name: tov
        description: Turnovers by the player.
      - name: fga
        description: Field goals attempted by the player.
      - name: fta
        description: Free throws attempted by the player.
      - name: seconds_played
        description: Total seconds played by the player in the game.
      - name: minutes_played
        description: Total minutes played by the player in the game, as a float.
      - name: pts_per_min
        description: Points scored per minute played.
      - name: ast_per_min
        description: Assists per minute played.
      - name: reb_per_min
        description: Rebounds per minute played.
      - name: stl_per_min
        description: Steals per minute played.
      - name: blk_per_min
        description: Blocks per minute played.
      - name: tov_per_min
        description: Turnovers per minute played.
      - name: fga_per_min
        description: Field goals attempted per minute played.
      - name: fta_per_min
        description: Free throws attempted per minute played.
    tests:
      - unique:
          column_names: [game_id, player_id] 